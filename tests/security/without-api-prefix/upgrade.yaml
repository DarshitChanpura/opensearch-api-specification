$schema: ../../json_schemas/test_story.schema.yaml

description: Test upgrade eligibility endpoints.
chapters:
  - synopsis: Check whether an upgrade can be performed.
    version: '>= 2.14'
    path: /_plugins/_security/_upgrade_check
    method: GET
    response:
      status: 200
  - synopsis: Perform the upgrade.
    version: '>= 2.14'
    path: /_plugins/_security/_upgrade_perform
    method: POST
    request_body:
      payload:
        config: ["roles"]
    response:
      status: 200  